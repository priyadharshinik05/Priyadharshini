n = int(input())
students = {}
for _ in range(n):
    name, tm, am, lm = input().split()
    tm, am, lm = map(int, (tm, am, lm))
    students[name] = (tm, am, lm)
avg_scores = {name: sum(scores) / 3 for name, scores in students.items()}
havg = max(avg_scores.values())
lavg = min(avg_scores.values())
ham = max(student[1] for student in students.values())
llm = min(student[2] for student in students.values())
stavg_highest = [name for name, avg in avg_scores.items() if avg == havg]
stavg_lowest = [name for name, avg in avg_scores.items() if avg == lavg]
stam_highest = [name for name, marks in students.items() if marks[1] == ham]
stlm_lowest = [name for name, marks in students.items() if marks[2] == llm]
print(' '.join(sorted(stavg_highest)))
print(' '.join(sorted(stam_highest)))
print(' '.join(sorted(stlm_lowest)))
print(' '.join(sorted(stavg_lowest)))
